{% load static %}
<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>Fornería · Administración</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <!-- Estilos personalizados y Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/estilos_base.css' %}">
    <link rel="stylesheet" href="{% static 'css/fuentes.css' %}">
    <link rel="stylesheet" href="{% static 'css/tarjetas.css' %}">
    
    {% block styles %}{% endblock %}

  </head>
  <body>
    <!-- NavBar -->
    <nav class="navbar">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center mb-0 h1" href="#">
      
          <!-- Icono en svg + titulo -->
          <svg class="logo-icon d-inline-block align-top me-2" 
            xmlns="http://www.w3.org/2000/svg" 
            width="689" height="689" 
            viewBox="0 0 689 689">
            <g>
              <path d="M 376.50 682.95 C365.66,683.88 328.26,684.12 317.00,683.34 C293.04,681.66 262.18,675.27 235.50,666.47 C215.63,659.91 186.53,646.68 170.51,636.92 C163.13,632.43 145.68,620.92 145.00,620.10 C144.73,619.77 142.93,618.40 141.00,617.04 C136.82,614.11 137.38,614.55 128.00,606.91 C115.59,596.81 96.67,578.59 87.24,567.67 C67.21,544.47 54.18,525.01 39.46,496.32 C30.21,478.30 26.28,469.19 22.29,456.50 C20.90,452.10 18.97,446.25 17.99,443.50 C15.12,435.40 10.58,414.82 8.07,398.50 C4.57,375.78 3.85,364.12 4.42,339.00 C4.74,324.98 5.41,310.35 5.91,306.50 C8.28,288.38 9.43,281.76 12.06,271.00 C12.53,269.08 13.19,266.15 13.53,264.50 C15.89,253.01 20.40,237.28 22.98,231.50 C23.47,230.40 24.45,227.70 25.16,225.50 C25.88,223.30 27.26,220.02 28.23,218.22 C29.20,216.42 30.00,214.48 30.00,213.92 C30.00,212.96 37.90,195.75 41.91,188.00 C66.13,141.07 105.51,96.91 150.50,66.19 C172.45,51.20 201.84,35.60 218.00,30.36 C220.48,29.56 223.51,28.47 224.75,27.95 C230.46,25.54 231.87,25.01 237.50,23.16 C253.84,17.80 257.91,16.74 276.00,13.11 C301.56,7.99 312.37,7.00 342.65,7.00 C374.55,7.00 393.18,8.59 413.00,13.01 C417.67,14.06 424.20,15.44 427.50,16.09 C430.80,16.74 437.55,18.56 442.50,20.14 C447.45,21.73 453.08,23.50 455.00,24.08 C458.41,25.10 459.82,25.63 465.00,27.77 C466.38,28.33 469.08,29.34 471.00,29.99 C474.94,31.34 482.09,34.59 496.00,41.36 C543.27,64.38 585.98,99.75 617.06,141.60 C624.45,151.56 631.24,161.01 632.14,162.60 C633.04,164.20 635.44,168.20 637.48,171.50 C652.47,195.75 667.95,231.71 673.00,254.00 C673.68,257.02 674.61,260.40 675.06,261.50 C675.51,262.60 676.33,265.98 676.89,269.00 C677.45,272.02 678.60,278.10 679.46,282.50 C683.47,303.15 684.40,315.04 684.39,345.50 C684.37,377.01 683.02,391.55 677.89,415.50 C676.83,420.45 675.70,425.85 675.38,427.50 C675.06,429.15 674.21,432.30 673.49,434.50 C672.77,436.70 671.42,441.20 670.48,444.50 C663.79,468.14 649.96,498.50 634.48,523.58 C606.61,568.72 561.11,612.37 514.50,638.68 C498.72,647.59 496.35,648.79 483.30,654.57 C447.88,670.25 411.33,679.96 376.50,682.95 ZM 329.89 675.56 C330.72,676.39 359.91,676.00 367.21,675.06 C371.22,674.55 379.00,673.63 384.50,673.01 C410.70,670.09 446.31,661.40 462.74,653.93 C465.07,652.87 467.35,652.00 467.81,652.00 C468.27,652.00 471.43,650.65 474.84,649.00 C478.24,647.35 481.40,646.00 481.86,646.00 C482.82,646.00 498.33,638.05 508.89,632.14 C512.95,629.86 516.59,628.00 516.98,628.00 C517.37,628.00 518.50,627.10 519.50,626.00 C520.50,624.90 521.72,624.00 522.23,624.00 C522.74,624.00 525.71,622.07 528.83,619.72 C531.95,617.37 536.51,614.15 538.96,612.57 C543.45,609.67 548.51,605.54 566.00,590.44 C578.75,579.43 591.52,565.91 609.61,544.23 C613.28,539.84 628.94,516.78 631.18,512.48 C632.03,510.84 634.87,505.67 637.49,501.00 C641.82,493.29 644.97,486.86 648.51,478.50 C649.21,476.85 650.96,472.90 652.39,469.72 C653.83,466.54 655.00,463.13 655.00,462.14 C655.00,461.14 655.30,460.03 655.66,459.67 C656.89,458.45 662.12,443.16 663.94,435.50 C665.52,428.84 667.05,423.06 668.04,420.00 C670.50,412.43 672.02,401.11 675.13,367.50 C677.01,347.07 677.12,342.88 676.08,330.00 C674.71,312.96 673.32,300.45 672.02,293.50 C671.51,290.75 670.56,285.58 669.90,282.00 C669.25,278.42 667.61,271.23 666.26,266.00 C664.91,260.77 663.45,254.93 663.02,253.00 C662.58,251.07 661.27,246.63 660.11,243.12 C658.95,239.61 658.00,235.98 658.00,235.04 C658.00,233.51 655.45,226.63 651.32,217.00 C647.34,207.75 637.76,188.56 634.09,182.53 C631.84,178.83 630.00,175.68 630.00,175.53 C630.00,175.02 617.45,156.51 613.04,150.50 C604.53,138.92 581.90,112.65 577.51,109.25 C576.26,108.29 570.80,103.49 565.37,98.58 C556.28,90.37 544.46,81.17 530.91,71.74 C507.48,55.45 475.30,39.99 445.00,30.48 C440.88,29.18 434.81,27.15 431.52,25.97 C424.69,23.52 399.79,18.77 381.15,16.37 C365.26,14.32 326.92,14.03 311.50,15.85 C296.94,17.56 282.98,19.84 280.50,20.92 C279.40,21.40 275.80,22.33 272.50,23.00 C269.20,23.67 264.02,24.87 261.00,25.67 C257.98,26.48 253.93,27.54 252.00,28.03 C220.20,36.12 179.38,55.80 149.66,77.36 C115.19,102.37 89.35,129.32 66.38,164.22 C61.77,171.22 58.00,177.18 58.00,177.46 C58.00,177.73 56.47,180.35 54.60,183.27 C47.79,193.91 34.83,222.99 29.52,239.50 C22.98,259.87 19.17,276.41 15.81,299.00 C13.79,312.58 13.50,318.21 13.53,344.50 C13.57,381.11 15.31,395.96 23.46,429.00 C24.48,433.16 29.18,448.75 29.94,450.50 C30.41,451.60 32.48,457.23 34.53,463.00 C37.73,472.01 53.46,505.57 57.24,511.46 C74.72,538.70 81.55,547.86 98.62,567.00 C109.75,579.46 111.56,581.22 126.52,594.06 C142.03,607.35 145.05,609.63 161.76,620.66 C174.59,629.12 200.75,643.26 210.75,647.13 C215.33,648.90 217.61,649.85 222.24,651.90 C224.85,653.06 227.57,654.00 228.29,654.00 C229.01,654.00 230.03,654.37 230.55,654.83 C231.07,655.28 233.52,656.23 236.00,656.94 C240.65,658.27 242.73,659.00 247.00,660.77 C248.38,661.35 251.75,662.33 254.50,662.97 C257.25,663.61 261.08,664.51 263.00,664.99 C266.10,665.75 272.07,667.12 285.50,670.18 C291.10,671.45 301.32,672.71 316.48,674.01 C323.61,674.62 329.65,675.32 329.89,675.56 ZM 367.00 426.12 C364.20,426.90 208.21,427.10 206.25,426.33 C205.49,426.02 205.00,423.92 205.00,420.90 C205.00,415.60 205.63,414.97 212.40,413.51 C216.33,412.66 220.24,408.23 221.75,402.90 C222.72,399.50 223.06,368.59 223.25,267.00 L 223.50 135.50 L 221.28 131.93 C218.05,126.74 215.74,124.98 210.33,123.61 C205.57,122.40 205.50,122.32 205.19,118.04 C205.00,115.45 205.35,113.40 206.06,112.97 C207.84,111.86 267.28,113.08 268.75,114.25 C269.44,114.80 269.99,116.43 269.99,117.87 C269.98,120.10 269.03,120.95 263.74,123.50 C254.11,128.13 253.86,128.85 252.92,155.34 C252.49,167.53 252.25,227.23 252.39,288.00 C252.65,403.05 252.63,402.47 256.79,405.64 C262.64,410.08 279.94,411.09 314.50,409.00 C343.66,407.24 350.30,405.61 357.44,398.47 C360.34,395.56 366.05,385.41 368.49,378.81 C370.50,373.38 371.55,372.76 376.43,374.11 C379.58,374.98 380.00,375.47 379.99,378.30 C379.98,380.06 379.25,384.42 378.38,388.00 C376.34,396.29 374.38,405.01 372.98,412.00 C370.85,422.58 369.67,425.38 367.00,426.12 ZM 400.80 570.28 L 400.50 575.50 L 370.50 575.68 C354.00,575.78 339.94,575.63 339.25,575.35 C338.49,575.04 338.00,572.93 338.00,570.04 L 338.00 565.24 L 342.65 564.07 C348.37,562.63 353.39,557.87 354.89,552.45 C355.63,549.79 355.99,529.30 355.99,489.70 L 356.00 430.90 L 364.07 431.09 C373.70,431.32 374.67,430.66 375.94,422.94 C376.43,419.95 377.35,416.17 377.97,414.55 C378.60,412.92 379.49,408.51 379.96,404.75 C380.81,398.00 382.39,394.51 384.11,395.57 C384.60,395.87 385.00,397.43 385.00,399.02 C385.00,400.87 385.70,402.31 386.93,402.96 C388.11,403.59 398.00,404.00 412.18,403.99 C443.38,403.97 448.15,402.72 454.24,392.92 C456.52,389.26 457.91,388.00 459.68,388.00 C460.99,388.00 462.25,388.56 462.48,389.25 C462.71,389.94 462.59,400.62 462.20,413.00 L 461.50 435.50 L 458.97 435.79 C456.96,436.03 455.80,435.17 453.21,431.49 C450.96,428.30 448.36,426.15 444.73,424.46 C439.62,422.07 438.92,422.02 413.86,422.01 C390.10,422.00 388.05,422.14 385.86,423.91 L 383.50 425.82 L 383.50 488.66 C383.50,548.16 383.60,551.70 385.38,555.28 C387.31,559.17 392.99,563.18 398.30,564.41 C400.98,565.04 401.09,565.29 400.80,570.28 ZM 359.00 388.10 C359.00,388.59 358.33,389.00 357.50,389.00 C356.19,389.00 356.00,382.63 355.99,337.75 L 355.98 286.50 L 353.03 281.36 C350.23,276.48 346.94,274.07 339.75,271.65 C338.40,271.20 338.00,269.93 338.00,266.06 L 338.00 261.06 L 403.25 260.78 C439.14,260.63 469.62,260.76 471.00,261.07 L 473.50 261.64 L 473.50 300.50 L 470.78 300.81 C468.43,301.08 467.79,300.53 465.97,296.67 C461.32,286.76 449.79,280.41 433.56,278.83 C418.14,277.32 388.96,277.32 386.25,278.82 L 384.00 280.07 L 384.00 324.98 C384.00,350.76 383.61,370.12 383.09,370.44 C382.59,370.75 379.68,370.04 376.62,368.87 C371.47,366.90 370.86,366.86 368.65,368.31 C366.57,369.67 359.00,385.20 359.00,388.10 Z" fill="currentColor" data-index="0" style="opacity: 1;"></path>
              <path d="M 401.81 576.14 C401.09,576.60 386.42,576.98 369.22,576.98 C343.57,577.00 337.84,576.75 337.41,575.62 C337.12,574.87 337.02,572.07 337.19,569.40 L 337.50 564.56 L 342.60 563.03 C348.78,561.17 350.62,559.74 352.76,555.08 C354.22,551.91 354.45,544.67 354.77,492.00 C355.08,440.63 354.92,432.23 353.64,430.50 C352.19,428.54 350.70,428.49 278.33,428.00 L 204.50 427.50 L 204.20 421.84 C203.94,416.91 204.20,415.98 206.18,414.59 C207.42,413.72 209.45,413.00 210.69,413.00 C214.47,413.00 219.44,407.74 220.77,402.33 C221.64,398.76 222.02,363.45 222.23,267.00 C222.48,147.37 222.36,136.25 220.85,133.50 C218.41,129.04 215.65,126.93 209.77,125.02 L 204.50 123.31 L 204.19 118.58 C204.17,118.25 204.15,117.93 204.13,117.63 C203.99,115.80 203.89,114.46 204.44,113.49 C205.91,110.90 212.00,110.93 234.36,111.05 C235.73,111.06 237.16,111.06 238.66,111.07 L 271.00 111.22 L 271.15 113.86 C271.24,115.31 271.38,117.18 271.47,118.00 C271.73,120.39 270.08,123.00 268.30,123.00 C267.41,123.00 264.78,124.11 262.47,125.47 C261.25,126.18 260.24,126.56 259.39,127.17 C254.72,130.52 255.05,140.83 254.40,251.56 C254.02,315.88 254.05,376.02 254.46,385.22 C255.17,401.10 255.33,402.06 257.64,404.37 C261.57,408.29 268.45,408.92 297.01,407.95 C339.55,406.51 350.05,404.99 353.40,399.74 C354.60,397.87 354.84,388.48 354.90,342.50 C354.97,287.50 354.97,287.50 352.74,283.01 C350.32,278.16 345.09,274.00 341.41,274.00 C340.15,274.00 338.41,273.00 337.56,271.78 C335.92,269.44 335.47,262.38 336.83,260.24 C337.46,259.25 352.08,259.04 406.56,259.24 L 475.50 259.50 L 476.04 301.77 L 473.43 302.43 C469.76,303.35 467.53,302.40 465.96,299.23 C461.63,290.53 454.55,284.87 444.31,281.95 C438.84,280.38 433.63,280.02 413.41,279.78 C391.16,279.52 388.94,279.65 387.30,281.29 C385.60,282.97 385.51,286.46 385.66,341.26 L 385.82 399.43 L 388.12 401.30 C390.27,403.04 392.21,403.15 415.47,402.82 C445.53,402.41 447.45,401.89 453.38,392.62 C456.92,387.09 461.00,384.60 463.09,386.69 C463.65,387.25 463.93,397.67 463.77,412.07 L 463.50 436.50 L 459.91 436.80 C456.71,437.07 455.92,436.61 452.58,432.53 C445.53,423.92 444.15,423.58 415.16,423.17 C389.98,422.82 389.80,422.84 387.41,425.09 L 385.00 427.35 L 385.04 488.42 C385.09,554.62 385.15,555.40 390.51,559.50 C391.94,560.60 395.23,562.21 397.81,563.08 L 402.50 564.66 L 402.81 569.99 C403.01,573.57 402.69,575.58 401.81,576.14 ZM 367.00 426.12 C369.67,425.38 370.85,422.58 372.98,412.00 C374.38,405.01 376.34,396.29 378.38,388.00 C379.25,384.42 379.98,380.06 379.99,378.30 C380.00,375.47 379.58,374.98 376.43,374.11 C371.55,372.76 370.50,373.38 368.49,378.81 C366.05,385.41 360.34,395.56 357.44,398.47 C350.30,405.61 343.66,407.24 314.50,409.00 C279.94,411.09 262.64,410.08 257.64,404.37 C255.33,402.06 255.17,401.10 254.46,385.22 C254.05,376.02 254.02,315.88 254.40,251.56 C255.05,140.83 254.72,130.52 259.39,127.17 C260.24,126.56 261.25,126.18 262.47,125.47 C264.78,124.11 267.41,123.00 268.30,123.00 C270.08,123.00 271.73,120.39 271.47,118.00 C271.38,117.18 271.24,115.31 271.15,113.86 L 271.00 111.22 L 238.66 111.07 C237.16,111.06 235.73,111.06 234.36,111.05 C212.00,110.93 205.91,110.90 204.44,113.49 C203.89,114.46 203.99,115.80 204.13,117.63 C204.15,117.93 204.17,118.25 204.19,118.58 L 204.50 123.31 L 209.77 125.02 C215.65,126.93 218.41,129.04 220.85,133.50 C221.28,134.33 221.75,135.25 222.18,136.17 C222.18,136.17 222.18,136.17 222.18,136.17 C222.75,137.28 223.23,138.20 223.50,138.74 L 223.25 267.00 C223.06,368.59 222.72,399.50 221.75,402.90 C220.24,408.23 216.33,412.66 212.40,413.51 C205.63,414.97 205.00,415.60 205.00,420.90 C205.00,423.92 205.49,426.02 206.25,426.33 C208.21,427.10 364.20,426.90 367.00,426.12 ZM 400.80 570.28 C401.09,565.29 400.98,565.04 398.30,564.41 C392.99,563.18 387.31,559.17 385.38,555.28 C383.60,551.70 383.50,548.16 383.50,488.66 L 383.50 425.82 L 385.86 423.91 C388.05,422.14 390.10,422.00 413.86,422.01 C438.92,422.02 439.62,422.07 444.73,424.46 C448.36,426.15 450.96,428.30 453.21,431.49 C455.80,435.17 456.96,436.03 458.97,435.79 L 461.50 435.50 L 462.20 413.00 C462.59,400.62 462.71,389.94 462.48,389.25 C462.25,388.56 460.99,388.00 459.68,388.00 C457.91,388.00 456.52,389.26 454.24,392.92 C448.15,402.72 443.38,403.97 412.18,403.99 C398.00,404.00 388.11,403.59 386.93,402.96 C385.70,402.31 385.00,400.87 385.00,399.02 C385.00,397.43 384.60,395.87 384.11,395.57 C382.39,394.51 380.81,398.00 379.96,404.75 C379.49,408.51 378.60,412.92 377.97,414.55 C377.35,416.17 376.43,419.95 375.94,422.94 C374.67,430.66 373.70,431.32 364.07,431.09 L 356.00 430.90 L 355.99 489.70 C355.99,529.30 355.63,549.79 354.89,552.45 C353.39,557.87 348.37,562.63 342.65,564.07 L 338.00 565.24 L 338.00 570.04 C338.00,572.93 338.49,575.04 339.25,575.35 C339.94,575.63 354.00,575.78 370.50,575.68 L 400.50 575.50 ZM 359.00 388.10 C359.00,385.20 366.57,369.67 368.65,368.31 C370.86,366.86 371.47,366.90 376.62,368.87 C379.68,370.04 382.59,370.75 383.09,370.44 C383.61,370.12 384.00,350.76 384.00,324.98 L 384.00 280.07 L 386.25 278.82 C388.96,277.32 418.14,277.32 433.56,278.83 C449.79,280.41 461.32,286.76 465.97,296.67 C467.79,300.53 468.43,301.08 470.78,300.81 L 473.50 300.50 L 473.50 261.64 L 471.00 261.07 C469.62,260.76 439.14,260.63 403.25,260.78 L 338.00 261.06 L 338.00 266.06 C338.00,269.93 338.40,271.20 339.75,271.65 C346.94,274.07 350.23,276.48 353.03,281.36 L 355.98 286.50 L 355.99 337.75 C356.00,382.63 356.19,389.00 357.50,389.00 C358.33,389.00 359.00,388.59 359.00,388.10 Z" fill="currentColor" data-index="1"></path>
            </g>
          </svg>
          <span class="logo-text">La Fornería</span>
        </a>
      
        <!-- Menú Navegación -->
        <div class="d-flex align-items-center gap-3">
          {% if request.user.is_authenticated %}
        <div class="nav-center">
          <div class="btn-group" role="group" aria-label="Opciones de navegación">

            {% if request.user.is_staff or request.user.is_superuser %}
              <a class="btn btn-general btn-sm" href="{% url 'inventario_home' %}">Inventario</a>
            {% else %}
              <span 
                data-bs-toggle="tooltip" 
                data-bs-placement="bottom"
                data-bs-title="Solo disponible para administradores">
                <a class="btn btn-general btn-sm disabled" aria-disabled="true">
                  Inventario
                </a>
              </span>
            {% endif %}

            <a class="btn btn-general btn-sm" href="{% url 'ventas_home' %}">Ventas</a>

            {% if request.user.is_superuser %}
              <a class="btn btn-admin btn-sm" href="{% url 'admin:index' %}" title="Administración">Admin</a>
            {% endif %}
            
          </div>
        </div>

        <!-- Menú Usuario -->
          <div class="d-flex align-items-center gap-3 ms-auto">
            <span class="user-text">
              {{ request.user.get_full_name|default:request.user.username }}
            </span>
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button class="btn-sesion" type="submit">
                <span class="icono-puerta"
                      data-bs-toggle="tooltip" 
                      data-bs-placement="bottom"
                      data-bs-title="Cerrar sesión">
                  <i class="bi bi-door-closed icono-normal me-1"></i>
                  <i class="bi bi-door-open icono-hover me-1"></i>
                </span>
              </button>
            </form>
          </div>
            {% else %}
              <a class="btn btn-outline-light btn-sm" href="{% url 'login' %}">Iniciar sesión</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <main class="container-fluid mt-3">
      {% if messages %}
        <div class="container">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
      {% block content %}{% endblock %}
    </main>

    {% block scripts %}
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
      <script>

        // tooltips de Bootstrap
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        [...tooltipTriggerList].map(el => new bootstrap.Tooltip(el));
      </script>
      <script>
        
        // SweetAlert para vendedores sin permiso de Inventario Opcional para implementacion
        document.addEventListener('DOMContentLoaded', function(){
          const btn = document.getElementById('inventario-disabled');
          if(!btn) return;
          btn.addEventListener('click', function(e){
            e.preventDefault();
            Swal.fire({
              icon: 'warning',
              title: 'Acceso restringido',
              text: 'No tienes permiso para acceder al módulo de Inventario.',
              confirmButtonText: 'Entendido'
            });
          });
        });
      </script>
    {% endblock %}
  </body>
</html>