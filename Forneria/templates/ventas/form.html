{% extends 'base.html' %}
{% load static %}

{% block content %}

<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="{% static 'css/ventas.css' %}">

<div class="p-3">

<!-- ðŸŸ¦ Encabezado superior -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3><i class="bi bi-shop"></i> La FornerÃ­a Â· POS</h3>
  <div>
    <b>Fecha:</b> <span id="fecha"></span> |
    <b>Hora:</b> <span id="hora"></span> |
  </div>
</div>

<div class="row">

  <!-- ðŸŸ© Productos -->
  <div class="col-lg-8">

      <!-- Buscador -->
      <div class="input-group mb-3">
          <span class="input-group-text"><i class="bi bi-search"></i></span>
          <input id="search" type="text" class="form-control" placeholder="Buscar producto...">
      </div>

      <!-- CÃ³digo -->
      <div class="input-group mb-3">
          <span class="input-group-text"><i class="bi bi-upc-scan"></i></span>
          <input id="codigoInput" type="text" class="form-control" placeholder="CÃ³digo del producto">
          <button class="btn btn-primary" id="btnBuscarCodigo">Agregar</button>
      </div>

      <div class="row g-3" id="product-list"></div>
  </div>

  <!-- ðŸŸ¥ Carrito -->
  <div class="col-lg-4">
      <div class="ticket-sidebar p-3">

          <h4 class="mb-3">Carrito</h4>

          <table class="table table-sm">
              <thead>
                  <tr>
                      <th>CÃ³digo</th>
                      <th>Nombre</th>
                      <th>Cant.</th>
                      <th>Subt.</th>
                      <th></th>
                  </tr>
              </thead>
              <tbody id="carritoBody"></tbody>
          </table>

          <hr>

          <div><b>Neto:</b> $<span id="neto">0</span></div>
          <div><b>IVA (19%):</b> $<span id="iva">0</span></div>
          <div class="fs-4"><b>Total:</b> $<span id="total">0</span></div>

          <hr>

          <h5>MÃ©todo de pago</h5>
          <select class="form-select mb-2" id="metodoPago">
              <option value="efectivo">Efectivo</option>
              <option value="debito">DÃ©bito</option>
              <option value="credito">CrÃ©dito</option>
              <option value="mixto">Mixto</option>
          </select>

          <div id="montosPago">
              <input type="number" id="montoEfectivo" class="form-control mb-2 d-none" placeholder="Monto en efectivo">
              <input type="number" id="montoDebito" class="form-control mb-2 d-none" placeholder="Monto en dÃ©bito">
              <input type="number" id="montoCredito" class="form-control mb-2 d-none" placeholder="Monto en crÃ©dito">
          </div>

          <button class="btn btn-success w-100 mt-3" id="btnPagar">
              <i class="bi bi-cash-coin"></i> Pagar
          </button>

      </div>
  </div>

</div>
</div>

<script id="productos-data" type="application/json">
  {{ productos_json|safe }}
</script>

<!-- âœ” Scripts de Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/ventas.js' %}" id="ventas-js" data-url-crear-venta="{% url 'crear_venta' %}" data-url-lista-ventas="{% url 'lista_ventas' %}"></script>

{% endblock %}
